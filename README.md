# 과제 개요 및 설명

## 디렉토리 구조

- `algorithm` : 알고리즘 문제에 대한 풀이가 있습니다.
- `timer` : 타이머 과제에 대한 산출물이 있습니다.

## Timer App

### 프로젝트 실행 방법

아래 커맨드를 통해 실행할 수 있습니다.

```bash
cd timer
npm install
npm run dev
```

### 문제 상황 및 해결책

**브라우저 환경에서 setInterval만으로 구현한 타이머는 여러 원인으로 인해 느려질 수 있습니다.**

- `setInterval`의 동작성
  - 일정 시간마다, 혹은 일정 시간 후에 그 함수의 동작을 보장하는 것이 아님
  - 그 시간 후 콜백을 큐에 넣는 식으로 동작함
- 싱글 스레드
  - 동기적으로 매우 오래 걸리는 함수가 실행되고 있다면 타이머가 제대로 동작하지 않을 가능성
- 브라우저 자체가 멈춤
  - 멈춰있던 시간만큼 타이머도 동작하지 않게 됨

**생각할 수 있는 대안은 다음과 같습니다.**

- 신뢰할 수 있는 곳으로부터 시간을 수신해 오차 보정
  - 서버 또는 다른 API로부터 시간 수신 (이 과제에서는 사용하지 않음)
  - **시작시간을 체크한 뒤 현재시간과 시작시간을 지속적으로 비교** (채택)

### 주요 상태 설계

#### RunningState

`type RunningState = 'RUNNING' | 'PAUSED' | 'IDLE'`

타이머 앱의 주요 분기는 `RunningState`로부터 이루어집니다. 이 값에 따라 타이머의 작동 상태를 특정합니다. '작동 중', '일시정지됨', '초기화된 상태'로 타이머 상태를 나누었습니다.

#### startTimeRef, lapRef, displayTime

각각 시작 시간, 일시정지 시간, 화면에 보여질 시간입니다.

- 주기적으로 현재시간에서 `startTimeRef`를 빼는 방식으로 `displayTime`을 갱신

- 타이머가 시작될 때는 `startTimeRef`를, 일시정지될 때 `lapRef`를 갱신하고, 재시작될 때 두 시간의 차를 통해 시간을 보정

- 원천이 되는 시간 값(`startTimeRef`, `lapRef`)은 Ref로 관리
  - 렌더 사이클과 무관함
  - 렌더 사이클에 포함되면 불필요한 리렌더링을 유발함
- 화면에 표시되는 시간 값(`displayTime`)은 State로 관리
  - `startTimeRef.current`에서 파생되는 값
  - 렌더링과 직결됨

#### targetSecs, displayAlarm

일정 시간 후 경과 여부를 알려주기 위한 user input 상태와, 알람 컴포넌트가 보여질지 말지를 결정하는 상태입니다.

### 타이머 로직 및 시간 측정 방법

기준 시간을 두고 일정 시간마다 타이머를 보정하는 것이 주 아이디어입니다.

- 시간 측정은 `performance.now()`로
  - 페이지 로드 시점부터의 경과 시간을 나타냄
  - Date.now()는 시스템 시계로 타이머가 동작하는 중간에 시간대가 바뀌면 타이머의 동작성을 보장하지 못함
- 1초보다 짧은 주기(100ms)로 시간을 측정해 UI상의 정확성 확보
